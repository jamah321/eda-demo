- name: Listen and reading message from Kafka topic
  hosts: all
  sources:
    - ansible.eda.kafka:
        host: ocpmanagement.ocpdemo.ghost.lenovolabs
        port: 9092
        topic: dnf-topic
        group_id:

  rules:
    - name: Kafka message debuging 
      condition: event.body.schema.payload is search("DEBUG Removed\: telnet",ignorecase=true)
      action:
        debug:
          var: "{{ event.body.payload }}"

#    - name: httpd service down detected
#      condition: event.schema is defined
#      action:
#        run_job_template:
#          name: kafka-eda-demo-template
#          organization: Default

